<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Risk Alerts & Analysis System</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box }

    body {
      font-family: "Times New Roman", serif;
      background: #f5f5f5;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px 20px;
    }

    .container {
      background: #fff;
      border-radius: 8px;
      padding: 40px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, .1);
      max-width: 1600px;
      width: 100%;
    }

    /* ✅ CENTER TITLE */
    .header {
      text-align: center;
      margin-bottom: 24px;
    }

    .header h1 {
      font-size: 28px;
      font-weight: bold;
      color: #000;
    }

    svg { width: 100%; height: auto; display: block }

    .entity { fill: #fff; stroke: #000; stroke-width: 2 }
    .relationship { fill: #fff; stroke: #000; stroke-width: 2 }
    .attribute { fill: #fff; stroke: #000; stroke-width: 1.5 }

    .aggregation-box { fill: none; stroke: #000; stroke-width: 3 }

    .line { stroke: #000; stroke-width: 1.5; fill: none }
    .double-line { stroke: #000; stroke-width: 1.5; fill: none }

    .entity-text { font-size: 16px; font-weight: bold; fill: #000 }
    .relationship-text { font-size: 14px; fill: #000; text-transform: uppercase }
    .attribute-text { font-size: 13px; fill: #000 }

    .underline { text-decoration: underline; font-weight: bold }
    .cardinality-text { font-size: 16px; font-weight: bold; fill: #000 }
    .aggregation-label { font-size: 14px; font-weight: bold; fill: #000; font-style: italic }
    .constraint-text { font-size: 12px; fill: #000 }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>Risk Alerts & Analysis System</h1>
    </div>

    <svg viewBox="0 0 1500 980" xmlns="http://www.w3.org/2000/svg">

      <!-- ================== AGGREGATION BOX ================== -->
      <rect x="10" y="20" width="520" height="600" class="aggregation-box" rx="10" />
      <text x="270" y="645" text-anchor="middle" class="aggregation-label">«Health Event History»</text>

      <!-- ================== FAMILY_MEMBER ================== -->
      <rect x="140" y="120" width="220" height="60" class="entity" />
      <text x="250" y="155" text-anchor="middle" class="entity-text">FAMILY_MEMBER</text>

      <!-- top attributes -->
      <ellipse cx="150" cy="70" rx="55" ry="18" class="attribute" />
      <text x="150" y="75" text-anchor="middle" class="attribute-text">
        <tspan class="underline">member_id</tspan>
      </text>
      <line x1="150" y1="88" x2="200" y2="120" class="line" />

      <ellipse cx="260" cy="70" rx="50" ry="18" class="attribute" />
      <text x="260" y="75" text-anchor="middle" class="attribute-text">first_name</text>
      <line x1="260" y1="88" x2="260" y2="120" class="line" />

      <ellipse cx="370" cy="70" rx="50" ry="18" class="attribute" />
      <text x="370" y="75" text-anchor="middle" class="attribute-text">last_name</text>
      <line x1="370" y1="88" x2="320" y2="120" class="line" />

      <!-- left attributes -->
      <ellipse cx="75" cy="140" rx="32" ry="18" class="attribute" />
      <text x="75" y="145" text-anchor="middle" class="attribute-text">gender</text>
      <line x1="107" y1="140" x2="140" y2="140" class="line" />

      <ellipse cx="75" cy="185" rx="30" ry="18" class="attribute" />
      <text x="75" y="190" text-anchor="middle" class="attribute-text">status</text>
      <line x1="105" y1="185" x2="140" y2="175" class="line" />

      <!-- right attributes -->
      <ellipse cx="465" cy="125" rx="58" ry="18" class="attribute" />
      <text x="465" y="130" text-anchor="middle" class="attribute-text">date_of_birth</text>
      <line x1="407" y1="130" x2="360" y2="135" class="line" />

      <ellipse cx="465" cy="180" rx="55" ry="18" class="attribute" />
      <text x="465" y="185" text-anchor="middle" class="attribute-text">relationship</text>
      <line x1="410" y1="180" x2="360" y2="165" class="line" />

      <!-- bottom attributes -->
      <ellipse cx="150" cy="240" rx="60" ry="18" class="attribute" />
      <text x="150" y="245" text-anchor="middle" class="attribute-text">contact_phone</text>
      <line x1="180" y1="222" x2="225" y2="180" class="line" />

      <ellipse cx="340" cy="240" rx="68" ry="18" class="attribute" />
      <text x="340" y="245" text-anchor="middle" class="attribute-text">medical_history</text>
      <line x1="320" y1="222" x2="285" y2="180" class="line" />

      <!-- ================== HAS_EVENT ================== -->
      <polygon points="250,280 305,335 250,390 195,335" class="relationship" />
      <text x="250" y="340" text-anchor="middle" class="relationship-text">HAS_EVENT</text>

      <line x1="250" y1="180" x2="250" y2="280" class="line" />
      <text x="265" y="230" class="cardinality-text">1</text>

      <!-- ================== HEALTH_EVENT ================== -->
      <rect x="150" y="460" width="220" height="60" class="entity" />
      <text x="260" y="495" text-anchor="middle" class="entity-text">HEALTH_EVENT</text>

      <line x1="250" y1="390" x2="250" y2="460" class="line" />
      <text x="265" y="430" class="cardinality-text">M</text>

      <ellipse cx="110" cy="410" rx="52" ry="18" class="attribute" />
      <text x="110" y="415" text-anchor="middle" class="attribute-text">
        <tspan class="underline">event_id</tspan>
      </text>
      <line x1="135" y1="423" x2="170" y2="460" class="line" />

      <ellipse cx="410" cy="410" rx="50" ry="18" class="attribute" />
      <text x="410" y="415" text-anchor="middle" class="attribute-text">event_date</text>
      <line x1="385" y1="423" x2="350" y2="460" class="line" />

      <ellipse cx="480" cy="460" rx="50" ry="18" class="attribute" />
      <text x="480" y="465" text-anchor="middle" class="attribute-text">event_type</text>
      <line x1="430" y1="465" x2="370" y2="475" class="line" />

      <ellipse cx="75" cy="490" rx="35" ry="18" class="attribute" />
      <text x="75" y="495" text-anchor="middle" class="attribute-text">severity</text>
      <line x1="110" y1="490" x2="150" y2="490" class="line" />

      <ellipse cx="450" cy="500" rx="45" ry="18" class="attribute" />
      <text x="450" y="505" text-anchor="middle" class="attribute-text">diagnosis</text>
      <line x1="405" y1="500" x2="370" y2="495" class="line" />

      <ellipse cx="160" cy="575" rx="45" ry="18" class="attribute" />
      <text x="160" y="580" text-anchor="middle" class="attribute-text">symptoms</text>
      <line x1="175" y1="557" x2="195" y2="520" class="line" />

      <ellipse cx="250" cy="575" rx="45" ry="18" class="attribute" />
      <text x="250" y="580" text-anchor="middle" class="attribute-text">treatment</text>
      <line x1="250" y1="557" x2="250" y2="520" class="line" />

      <ellipse cx="340" cy="575" rx="42" ry="18" class="attribute" />
      <text x="340" y="580" text-anchor="middle" class="attribute-text">outcome</text>
      <line x1="325" y1="557" x2="305" y2="520" class="line" />

      <!-- ================== RECEIVES ================== -->
      <polygon points="700,160 760,220 700,280 640,220" class="relationship" />
      <text x="700" y="225" text-anchor="middle" class="relationship-text">RECEIVES</text>

      <polyline points="360,150 520,150 640,220" class="line" />
      <text x="440" y="145" class="cardinality-text">1</text>

      <!-- ================== DERIVED_FROM ================== -->
      <polygon points="700,340 760,400 700,460 640,400" class="relationship" />
      <text x="700" y="395" text-anchor="middle" class="relationship-text">DERIVED</text>
      <text x="700" y="412" text-anchor="middle" class="relationship-text">FROM</text>

      <line x1="530" y1="400" x2="640" y2="400" class="line" />
      <text x="545" y="390" class="cardinality-text">1</text>

      <!-- ================== ALERT ================== -->
      <rect x="1050" y="310" width="240" height="60" class="entity" />
      <text x="1170" y="345" text-anchor="middle" class="entity-text">ALERT</text>

      <ellipse cx="1040" cy="250" rx="42" ry="18" class="attribute" />
      <text x="1040" y="255" text-anchor="middle" class="attribute-text">
        <tspan class="underline">alert_id</tspan>
      </text>
      <line x1="1060" y1="263" x2="1100" y2="310" class="line" />

      <ellipse cx="1170" cy="240" rx="45" ry="18" class="attribute" />
      <text x="1170" y="245" text-anchor="middle" class="attribute-text">risk_level</text>
      <line x1="1170" y1="258" x2="1170" y2="310" class="line" />

      <ellipse cx="1300" cy="250" rx="50" ry="18" class="attribute" />
      <text x="1300" y="255" text-anchor="middle" class="attribute-text">alert_type</text>
      <line x1="1280" y1="263" x2="1240" y2="310" class="line" />

      <ellipse cx="1390" cy="320" rx="40" ry="18" class="attribute" />
      <text x="1390" y="325" text-anchor="middle" class="attribute-text">priority</text>
      <line x1="1350" y1="325" x2="1290" y2="330" class="line" />

      <ellipse cx="1390" cy="360" rx="35" ry="18" class="attribute" />
      <text x="1390" y="365" text-anchor="middle" class="attribute-text">status</text>
      <line x1="1355" y1="360" x2="1290" y2="350" class="line" />

      <ellipse cx="1390" cy="400" rx="35" ry="18" class="attribute" />
      <text x="1390" y="405" text-anchor="middle" class="attribute-text">notes</text>
      <line x1="1355" y1="400" x2="1290" y2="370" class="line" />

      <ellipse cx="1170" cy="455" rx="60" ry="18" class="attribute" />
      <text x="1170" y="460" text-anchor="middle" class="attribute-text">resolved_date</text>
      <line x1="1170" y1="437" x2="1170" y2="370" class="line" />

      <ellipse cx="1045" cy="495" rx="55" ry="18" class="attribute" />
      <text x="1045" y="500" text-anchor="middle" class="attribute-text">description</text>
      <line x1="1075" y1="482" x2="1120" y2="370" class="line" />

      <ellipse cx="1295" cy="495" rx="55" ry="18" class="attribute" />
      <text x="1295" y="500" text-anchor="middle" class="attribute-text">created_date</text>
      <line x1="1265" y1="482" x2="1220" y2="370" class="line" />

      <!-- ================== TOTAL PARTICIPATION (DOUBLE LINES) ================== -->
      <line x1="760" y1="220" x2="1050" y2="332" class="double-line" />
      <line x1="760" y1="224" x2="1050" y2="336" class="double-line" />
      <text x="910" y="265" class="cardinality-text">M</text>

      <line x1="760" y1="400" x2="1050" y2="348" class="double-line" />
      <line x1="760" y1="404" x2="1050" y2="352" class="double-line" />
      <text x="910" y="395" class="cardinality-text">M</text>

      <!-- ================== CONSTRAINTS BOX ================== -->
      <rect x="560" y="680" width="860" height="210" class="entity" rx="6" />
      <text x="990" y="710" text-anchor="middle" class="entity-text">Constraints</text>
      <line x1="575" y1="720" x2="1405" y2="720" class="line" />

      <text x="585" y="750" class="constraint-text">1. Domain Constraints:</text>
      <text x="605" y="770" class="constraint-text">• status ∈ {Active, Resolved}</text>
      <text x="605" y="790" class="constraint-text">• risk_level ∈ {Low, Moderate, High}</text>

      <text x="585" y="820" class="constraint-text">2. Structural Constraints:</text>
      <text x="605" y="840" class="constraint-text">• Every ALERT must be associated with exactly one FAMILY_MEMBER (via RECEIVES)</text>
      <text x="605" y="860" class="constraint-text">• ALERT has total participation in RECEIVES and DERIVED_FROM (double lines)</text>
      <text x="605" y="880" class="constraint-text">• Each ALERT is derived from exactly one Health Event History aggregation (1:M)</text>

    </svg>
  </div>
</body>

</html>
