<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Family Health History Tracking System - EER Diagram</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:"Times New Roman",serif;
      background:#f5f5f5;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:28px 16px;
    }
    .page{
      background:#fff;
      width:min(1550px, 100%);
      border:1.5px solid #000;
      padding:18px 18px 22px;
    }
    .title{
      text-align:center;
      font-weight:bold;
      font-size:22px;
      margin:6px 0 14px;
    }
    svg{width:100%;height:auto;display:block}

    .entity{fill:#fff;stroke:#000;stroke-width:2}
    .relationship{fill:#fff;stroke:#000;stroke-width:2}
    .attribute{fill:#fff;stroke:#000;stroke-width:1.5}

    .line{stroke:#000;stroke-width:1.6;fill:none}
    .double-line{stroke:#000;stroke-width:1.6;fill:none}

    .entity-text{font-size:15px;font-weight:bold;fill:#000;letter-spacing:.2px}
    .relationship-text{font-size:14px;font-weight:bold;fill:#000}
    .attribute-text{font-size:13px;fill:#000}
    .pk{text-decoration:underline;font-weight:bold}
    .card{font-size:16px;font-weight:bold;fill:#000}

    .constraints-box{fill:#fff;stroke:#000;stroke-width:2}
    .constraints-title{font-size:18px;font-weight:bold;fill:#000;text-decoration:underline}
    .constraints-text{font-size:13px;fill:#000}
    .constraints-subtitle{font-size:13px;font-weight:bold;fill:#000}
  </style>
</head>

<body>
  <div class="page">
    <div class="title">Family Health History Tracking System - EER Diagram</div>

    <svg viewBox="0 0 1400 820" xmlns="http://www.w3.org/2000/svg" aria-label="EER diagram">

      <!-- ===================== LEFT ENTITY: FAMILY_MEMBER ===================== -->
      <rect x="330" y="240" width="240" height="70" class="entity"/>
      <text x="450" y="282" text-anchor="middle" class="entity-text">FAMILY_MEMBER</text>

      <!-- FAMILY_MEMBER attributes -->
      <ellipse cx="155" cy="175" rx="105" ry="26" class="attribute"/>
      <text x="155" y="181" text-anchor="middle" class="attribute-text">
        <tspan class="pk">family_member_id</tspan>
      </text>
      <line x1="235" y1="195" x2="345" y2="240" class="line"/>

      <ellipse cx="370" cy="135" rx="62" ry="24" class="attribute"/>
      <text x="370" y="141" text-anchor="middle" class="attribute-text">name</text>
      <line x1="380" y1="159" x2="425" y2="240" class="line"/>

      <ellipse cx="540" cy="155" rx="88" ry="24" class="attribute"/>
      <text x="540" y="161" text-anchor="middle" class="attribute-text">date_of_birth</text>
      <line x1="530" y1="179" x2="510" y2="240" class="line"/>

      <!-- FIX #1 (arrow at gender): move gender + connect line to ellipse edge (no "floating" line) -->
      <ellipse cx="735" cy="205" rx="62" ry="24" class="attribute"/>
      <text x="735" y="211" text-anchor="middle" class="attribute-text">gender</text>
      <!-- connect from entity RIGHT edge (x=570) to LEFT edge of ellipse (x = 735 - 62 = 673) -->
      <line x1="570" y1="250" x2="673" y2="205" class="line"/>

      <ellipse cx="175" cy="330" rx="98" ry="26" class="attribute"/>
      <text x="175" y="336" text-anchor="middle" class="attribute-text">relationship_to_user</text>
      <line x1="273" y1="326" x2="330" y2="292" class="line"/>

      <ellipse cx="230" cy="410" rx="72" ry="26" class="attribute"/>
      <text x="230" y="416" text-anchor="middle" class="attribute-text">blood_type</text>
      <line x1="292" y1="398" x2="350" y2="310" class="line"/>

      <!-- ===================== RELATIONSHIP: HAS ===================== -->
      <polygon points="680,235 745,295 680,355 615,295" class="relationship"/>
      <text x="680" y="300" text-anchor="middle" class="relationship-text">HAS</text>

      <!-- FAMILY_MEMBER to HAS -->
      <line x1="570" y1="275" x2="615" y2="295" class="line"/>
      <text x="595" y="270" class="card">1</text>

      <!-- ===================== RIGHT ENTITY: HEALTH_EVENT ===================== -->
      <rect x="910" y="240" width="240" height="70" class="entity"/>
      <text x="1030" y="282" text-anchor="middle" class="entity-text">HEALTH_EVENT</text>

      <!-- FIX #2 (arrow at the double-line join): make the double lines start EXACTLY at diamond vertex and end at entity edge -->
      <!-- diamond right vertex = (745,295); entity left edge point = (910,275) -->
      <line x1="745" y1="295" x2="910" y2="275" class="line"/>
      <line x1="745" y1="303" x2="910" y2="283" class="double-line"/>
      <text x="835" y="270" class="card">M</text>

      <!-- HEALTH_EVENT attributes -->
      <ellipse cx="845" cy="160" rx="70" ry="24" class="attribute"/>
      <text x="845" y="166" text-anchor="middle" class="attribute-text">onset_age</text>
      <line x1="885" y1="182" x2="960" y2="240" class="line"/>

      <ellipse cx="1030" cy="110" rx="88" ry="26" class="attribute"/>
      <text x="1030" y="116" text-anchor="middle" class="attribute-text">diagnosis_date</text>
      <line x1="1030" y1="136" x2="1030" y2="240" class="line"/>

      <!-- FIX #3 (arrow at condition_name): move condition_name and event_id so they DON'T overlap -->
      <ellipse cx="1235" cy="150" rx="92" ry="26" class="attribute"/>
      <text x="1235" y="156" text-anchor="middle" class="attribute-text">condition_name</text>
      <!-- connect from ellipse bottom-left-ish to entity top-right area (clean line) -->
      <line x1="1198" y1="176" x2="1105" y2="240" class="line"/>

      <ellipse cx="1320" cy="205" rx="68" ry="24" class="attribute"/>
      <text x="1320" y="211" text-anchor="middle" class="attribute-text">
        <tspan class="pk">event_id</tspan>
      </text>
      <line x1="1265" y1="220" x2="1150" y2="250" class="line"/>

      <ellipse cx="1295" cy="345" rx="66" ry="26" class="attribute"/>
      <text x="1295" y="351" text-anchor="middle" class="attribute-text">severity</text>
      <line x1="1229" y1="345" x2="1150" y2="292" class="line"/>

      <ellipse cx="1315" cy="445" rx="58" ry="26" class="attribute"/>
      <text x="1315" y="451" text-anchor="middle" class="attribute-text">notes</text>
      <line x1="1257" y1="445" x2="1150" y2="310" class="line"/>

      <ellipse cx="905" cy="430" rx="58" ry="26" class="attribute"/>
      <text x="905" y="436" text-anchor="middle" class="attribute-text">status</text>
      <line x1="945" y1="410" x2="930" y2="310" class="line"/>

      <!-- ===================== CONSTRAINTS BOX ===================== -->
      <rect x="170" y="560" width="1060" height="220" class="constraints-box"/>
      <text x="700" y="600" text-anchor="middle" class="constraints-title">Constraints</text>

      <!-- Left column -->
      <text x="220" y="640" class="constraints-subtitle">1. Primary Keys:</text>
      <text x="240" y="666" class="constraints-text">• FAMILY_MEMBER: family_member_id (PK)</text>
      <text x="240" y="690" class="constraints-text">• HEALTH_EVENT: event_id (PK)</text>

      <text x="220" y="730" class="constraints-subtitle">3. Domain Constraints:</text>
      <text x="240" y="756" class="constraints-text">• onset_age: Must be a non-negative integer (≥ 0)</text>

      <!-- Right column -->
      <text x="700" y="640" class="constraints-subtitle">2. Cardinality and Participation:</text>
      <text x="720" y="666" class="constraints-text">• One FAMILY_MEMBER can have many (M) HEALTH_EVENTs</text>
      <text x="720" y="690" class="constraints-text">• Every HEALTH_EVENT must belong to exactly one (1) FAMILY_MEMBER</text>
      <text x="720" y="714" class="constraints-text">• HEALTH_EVENT has total participation (double line)</text>
      <text x="720" y="756" class="constraints-text">• severity: Controlled values {Low, Medium, High}</text>

    </svg>
  </div>
</body>
</html>
